# IMVU Insight - Frontend

The frontend application for IMVU Insight, built with Umi Max (`@umijs/max`), Ant Design, and Ant Design Pro Components.

At the moment, the frontend is in a “scaffold + baseline pages/routes” stage: it provides a global layout, a placeholder Home page, and a 404 page, with configuration in place to later integrate with the FastAPI backend and dashboards.

---

## Tech Stack

- Framework: Umi Max (`@umijs/max`) with React + TypeScript
- UI: Ant Design (`antd`)
- Components: Ant Design Pro Components (`@ant-design/pro-components`)
- Tooling: Prettier, ESLint (via `@umijs/max/eslint`), Stylelint (via `@umijs/max/stylelint`)
- Package manager: Yarn 4 (repo declares `packageManager: yarn@4.7.0` and uses `node_modules` linking)

---

## Requirements

- Node.js (a recent LTS is recommended)
- Yarn 4 (Corepack recommended)

If Corepack isn’t enabled on your machine:

```bash
corepack enable
corepack prepare yarn@4.7.0 --activate
```

---

## Local Development

From the `frontend/` directory:

```bash
yarn
yarn dev
```

Other useful commands:

```bash
# Production build (outputs to dist/)
yarn build

# Format codebase (Prettier)
yarn format
```

Notes:

- `yarn dev` runs `max dev`.
- After installing dependencies, `max setup` is executed via `postinstall` (see `postinstall` / `setup` scripts).

---

## Key Structure

```text
frontend/
├── config/
│   ├── config.ts        # Umi Max config (enables antd/access/request, etc.)
│   └── routes.ts        # Route definitions
├── src/
│   ├── app.ts           # Runtime config: layout, initial state
│   ├── access.ts        # Access control policy (currently empty)
│   └── pages/
│       ├── Home/        # Home page (placeholder)
│       └── 404.tsx      # 404 page
├── dist/                # Build output (max build)
├── .umi/                # Generated by Umi (do not edit manually)
└── package.json
```

---

## Routes

Routes are defined in `config/routes.ts`:

- `/` redirects to `/home`
- `/home` renders the Home page (`src/pages/Home`)
- `*` renders 404 (`src/pages/404.tsx`) with `layout: false`

---

## Layout & Runtime Configuration

Runtime configuration lives in `src/app.ts`:

- `layout`: uses the `mix` layout with title `IMVU Insight` and disables menu locale (`menu.locale = false`)
- `getInitialState`: currently returns a minimal initial state object; it can later be expanded to include user info, app config, or backend checks

---

## Access Control (Access)

The project enables the access capability (see `access` in `config/config.ts`). Currently, `src/access.ts` returns an empty object, meaning no access rules are defined yet.

When authentication/roles are introduced, you can derive access flags from `initialState` and apply them to routes/pages.

---

## Backend Integration (Planned)

The project enables the `request` capability (see `request` in `config/config.ts`). There is no explicit API base URL / dev proxy configuration in the repo yet.

Common approaches when integrating with FastAPI:

- Same-origin deployment: serve frontend assets and backend under the same domain, and call relative endpoints (e.g. `/api/...`).
- Dev proxy: add a `proxy` rule in the frontend config to forward `/api` to the local backend.

---

## Code Style

- Prettier: `yarn format`
- ESLint/Stylelint: provided via Umi Max presets; pre-commit formatting/linting can be enforced via `lint-staged` + `husky`
