# IMVU Insight Frontend

The frontend application for IMVU Insight, built with Umi Max (`@umijs/max`), Ant Design, and Ant Design Pro Components.

It provides the dashboard, data sync UI, business analysis pages, and IMVU graph views that consume the backend APIs.

---

## Current Status

- Login, dashboard, and global layout in place
- Data management: data sync upload + import history
- Business analysis: products, sales, buyers, recipients
- IMVU graph: users, relations, entity explorer
- System pages: about, developers, settings
- OpenAPI client generated under `src/services/insight`

---

## Tech Stack

- Framework: Umi Max (`@umijs/max`) with React + TypeScript
- UI: Ant Design (`antd`)
- Components: Ant Design Pro Components (`@ant-design/pro-components`)
- Tooling: Prettier, ESLint (via `@umijs/max/eslint`), Stylelint (via `@umijs/max/stylelint`)
- Package manager: Yarn 4 (repo declares `packageManager: yarn@4.7.0` and uses `node_modules` linking)

---

## Requirements

- Node.js (a recent LTS is recommended)
- Yarn 4 (Corepack recommended)

If Corepack is not enabled on your machine:

```bash
corepack enable
corepack prepare yarn@4.7.0 --activate
```

---

## Local Development

From the `frontend/` directory:

```bash
yarn
yarn dev
```

Other useful commands:

```bash
# Production build (outputs to dist/)
yarn build

# Format codebase (Prettier)
yarn format

# Regenerate OpenAPI client
yarn openapi
```

Notes:

- `yarn dev` runs `max dev`.
- After installing dependencies, `max setup` runs via `postinstall`.

---

## Key Structure

```text
frontend/
  config/
    config.ts        # Umi Max config (antd, access, request, openapi)
    routes.ts        # Route definitions
    proxy.ts         # Dev proxy for backend
  src/
    app.ts           # Runtime config: layout, initial state
    access.ts        # Access control policy
    pages/
      login/
      dashboard/
      data-management/data-sync/
      business-analysis/
      imvu-graph/
      system/
    services/insight/ # OpenAPI generated client
  dist/              # Build output (max build)
  .umi/              # Generated by Umi (do not edit manually)
  package.json
```

---

## Routes

Routes are defined in `config/routes.ts`:

- `/login`
- `/dashboard`
- `/data-management/data-sync`
- `/business-analysis/customers/buyers` and `/business-analysis/customers/buyers/:id`
- `/business-analysis/customers/recipients` and `/business-analysis/customers/recipients/:id`
- `/business-analysis/products` and `/business-analysis/products/:id`
- `/business-analysis/sales`
- `/imvu-graph/users` and `/imvu-graph/users/:id`
- `/imvu-graph/relations`
- `/imvu-graph/entity-explorer`
- `/system/about`
- `/system/developers`
- `/system/settings`

---

## Backend Integration

- Dev proxy lives in `config/proxy.ts` and forwards `/insight/api` to `http://127.0.0.1:7000`.
- OpenAPI generator config is in `config/config.ts` (schema: `http://127.0.0.1:7000/openapi.json`, prefix: `/insight/api`).

---

## Code Style

- Prettier: `yarn format`
- ESLint and Stylelint: provided via Umi Max presets; linting can be enforced via `lint-staged` + `husky`
